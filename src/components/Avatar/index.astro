---
import { Image } from 'astro:assets';

import './styles.css';

interface Props {
	image: ImageMetadata;
	imageAlt: string;
	loading?: 'eager' | 'lazy';
}

const { image: avatar, imageAlt: avatarAlt, loading } = Astro.props;

// eslint-disable-next-line @typescript-eslint/no-magic-numbers
const AVATAR_WIDTHS = [128, 256, 512, 768, avatar.width];
---
<picture
	class="user-avatar"
	itemprop="image"
	itemscope
	itemtype="https://schema.org/ImageObject"
>
	<Image
		class="u-photo photo"
		itemprop="contentUrl"
		src={avatar}
		alt={avatarAlt}
		loading={loading ?? 'lazy'}
		widths={AVATAR_WIDTHS}
		sizes={`(max-width: 360px) 128px, (max-width: 720px) 256px, (max-width: 1280px) 512px, (max-width: 2160px) 768px ${avatar.width}px`}
		quality={75}
	/>
</picture>
